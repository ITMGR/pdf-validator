<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Interface description - PDF Validator Documentation</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../override.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Interface description";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> PDF Validator Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">PDF Validation Service Overview</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../architecture/">Architecture of the Core Service</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../policy/">Validation Policy</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Interface description</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#interface-description">Interface description</a></li>
                
                    <li><a class="toctree-l4" href="#functionality">Functionality</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../deployment/">Deploying PDF Validator Web Service</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../tsl_downloader/">TSL file loading without internet</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../lotl_keystore/">Generating keystore for LOTL validation (optional)</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../logging/">Logging</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../monitoring/">Monitoring Service</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../testing/">Automation testing</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../issues/">Known Issues</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../documentation/">Documentation updating</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Appendixes</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../appendix/appendix-1/">Appendix 1 - Non-Functional Requirements</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../appendix/appendix-2/">Appendix 2 - Functional Requirements</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../appendix/appendix-3/">Appendix 3 - Validation Policy</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../appendix/appendix-4/">Appendix 4 - Validation Constraint Configuration</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../appendix/appendix-5/">Appendix 5 - Sample Validation Policy Configuration</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../appendix/appendix-6/">Appendix 6 - ValidationService WSDL</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../appendix/appendix-7/">Appendix 7 - Sample PDF Validation Service Request</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../appendix/appendix-8/">Appendix 8 - Sample Response Data Blocks - positive response</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../appendix/appendix-9/">Appendix 9 - Sample Response Data Blocks – negative response</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../appendix/appendix-10/">Appendix 10 - Summary of modifications made to the DSS library</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">PDF Validator Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Interface description</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="interface-description">Interface description</h1>
<p>Currently the Service provides only one service – PDF validation.
WSDL – see „Appendix 6 - ValidationService WSDL“ for details.
Target Namespace - http://dss.esig.europa.eu/validation/diagnostic.
Protocol – SOAP over HTTP/HTTPS, style – document, encoding – literal wrapped.</p>
<h2 id="functionality">Functionality</h2>
<h3 id="submitting-a-request">Submitting a Request</h3>
<p>The calling system will call the service with the required parameters. The result will be synchronously 
returned in the form of an XML. This Request is used to Validate the Signature in PDF against predetermined constraints.</p>
<h3 id="handling-errors">Handling Errors</h3>
<p>Errors occurring during the Validation Process are returned in the response data. Unexpected errors will be returned as SOAP faults.</p>
<h3 id="request">Request</h3>
<p>Request contains the actual PDF-file which Signature(s) need to be validated and additional information. For example of 
Service Request, see „Appendix 7 - Sample PDF Validation Service Request“.</p>
<ul>
<li><strong>document</strong> - Container for the signed document to be validated and additional information about the document   <br />
<strong>Type</strong>: wsDocument   <br />
<strong>Example</strong>: <code>&lt;document&gt;.... &lt;/document&gt;</code><ul>
<li><strong>bytes</strong> - Contents of the signed PDF document<br />
<strong>Type</strong>: base64Binary  <br />
<strong>Example</strong>: <code>&lt;bytes&gt;JVBERi0xLjQKJcOkw7zDtsOfC....&lt;/bytes&gt;</code></li>
<li><strong>name</strong> - File Name of the document  <br />
<strong>Type</strong>: string  <br />
<strong>Example</strong>: <code>&lt;name&gt;/fixedpath/file.pdf&lt;/name&gt;</code>  </li>
<li><strong>absolutePath</strong> - Complete File Name of the document with Directory Path <br />
<strong>Type</strong>: string  <br />
<strong>Example</strong>: <code>&lt;absolutePath&gt;/fixedpath/file.pdf &lt;/absolutePath&gt;</code></li>
<li><strong>mimeType</strong> - MIME-type of the document (PDF)    <br />
<strong>Type</strong>: mimeType    <br />
<strong>Example</strong>: <code>&lt;mimeType&gt;PDF&lt;/mimeType&gt;</code></li>
<li><strong>nextDocument</strong> - Determines if Diagnostic Data element is returned in Validation Service's Response. <br />
<strong>Type</strong>: wsDocument</li>
</ul>
</li>
<li><strong>diagnosticDataToBeReturned</strong> - Determines if Diagnostic Data element is returned in Validation Service's Response.  <br />
<strong>Type</strong>: boolean  <br />
<strong>Example</strong>: <code>&lt;diagnosticDataToBeReturned&gt;true&lt;/diagnosticDataToBeReturned&gt;</code></li>
</ul>
<h3 id="response">Response</h3>
<p>Response object validateDocumentResponse is an XML containing the results of validating PDF Signature against constraints. The Service’s Response must conform to ETSI TS 102 853 standard.</p>
<p>The Response consists of three data blocks:</p>
<ul>
<li>
<p><strong>The Simple Report</strong> -  is always returned in Response. Contains information about the validity of Signature according 
  to laws of the Republic of Estonia - validation time, status of validity, number of signatures and number of valid signatures 
  in document etc. See „1Appendix 8 - „The Simple Report“ for details. The Simple Report contains the following information:</p>
<ul>
<li>
<p><code>SimpleReport</code></p>
<ul>
<li><code>Policy</code> - Container for information about the Validation policy that was used to validate the PDF-file<ul>
<li><code>PolicyName</code>- Validation Policy name. Defined in constraint configuration file constraint.xml <br />
i             <strong>Example</strong>: <code>&lt;PolicyName&gt; QES AdESQC TL based &lt;/PolicyName&gt;</code></li>
<li><code>PolicyDescription</code> - Description of Validation Policy  <br />
<strong>Example</strong>: <code>&lt;PolicyDescription&gt; Validates  electronic signatures and indicates whether they are ......
&lt;/PolicyDescription&gt;</code></li>
</ul>
</li>
<li><code>ValidationTime</code> - Indicates the time when PDF-file was validated.  <br />
<strong>Example</strong>: <code>&lt;ValidationTime&gt;2015-09-01T15:13:00Z &lt;/ValidationTime&gt;</code></li>
<li><code>DocumentName</code> - Indicates the PDF-file that was validated   <br />
<strong>Example</strong>:  <code>&lt;DocumentName&gt;/fixedpath/file.pdf&lt;/DocumentName&gt;</code></li>
<li>
<p><code>Signature Id=“...“ SignatureFormat=“...“</code> - For every Signature in PDF-file, indicates the Signature ID and format  <br />
<strong>Example</strong>: <code>&lt;Signature Id="id-027bac117bcd86670c6eb8292925083b" SignatureFormat= "PAdES_BASELINE_LT"&gt;</code> </p>
<ul>
<li><code>SigningTime</code> - Signing time of Signature   <br />
<strong>Example</strong>: <code>&lt;SigningTime&gt;2015-07-09T07:00:48Z&lt;/SigningTime&gt;</code></li>
<li><code>SignedBy</code> - Signer’s Common Name
  <strong>Example</strong>: <code>&lt;SignedBy&gt;SURNAME,GIVENNAME,37101010101&lt;/SignedBy&gt;</code></li>
<li><code>Indication</code> - Indicates the validity of Signature: VALID, INVALID, INDETERMINATE (see „5.1.45.1.6 Validity of Document“ for details)  <br />
<strong>Example</strong>: <code>&lt;Indication&gt;VALID&lt;/Indication&gt;</code></li>
<li><code>Info BestSignatureTime="DATE" NameId="..."</code>  <br />
<strong>Example</strong>: <code>&lt;Info BestSignatureTime="2015-07-09T07:00:55Z" NameId="EMPTY" /&gt;</code></li>
<li><code>SignatureLevel</code> - Indicates Signature Level  <br />
<strong>Example</strong>: <code>&lt;SignatureLevel&gt;QES &lt;/SignatureLevel&gt;</code>    </li>
<li><code>SignatureScopes</code><ul>
<li>
<p><code>SignatureScope name=“...“ scope=“...“</code>  <br />
<strong>Example</strong>:    </p>
<p><SignatureScope name="PDF previous version #1" scope= "PdfByteRangeSignatureScope"> 
    The document byte range: [0, 14153, 52047, 491] 
</SignatureScope></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>ValidSignaturesCount</code> - Indicates total number of valid Signatures in PDF-file  <br />
<strong>Example</strong>: <code>&lt;ValidSignaturesCount&gt;1 &lt;/ValidSignaturesCount&gt;</code></p>
</li>
<li><code>SignaturesCount</code> - Indicates total number of Signatures in PDF-file <br />
<strong>Example</strong>: <code>&lt;SignaturesCount&gt;1 &lt;/SignaturesCount&gt;</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>The Detailed Report</strong> – is always returned in Response. Contains detailed information about validity of document's signature(s) and results of Validation Process. The detailed Report has the following blocks:</p>
<ul>
<li>Basic Building Blocks:<ul>
<li>ISC - Identification of Signer's Certificate;</li>
<li>VCI - Validation Context Initialization;</li>
<li>XCV - X.509 Certificate Validation;</li>
<li>CV - Cryptographic Verification;</li>
<li>SAV - Signature Acceptance Validation;        <br />
  Each block contains a number of Validation Policy rules that are executed sequentially. 
  The result of each rule is OK or NOT OK. The process is stopped when the first rule fails. 
  Each block contains a conclusion: <ul>
<li>If all rules are met then the conclusion node indicates VALID.</li>
<li>Otherwise INVALID or INDETERMINATE indication is returned depending on the ETSI standard definition.</li>
</ul>
</li>
</ul>
</li>
<li>Basic Validation Data;</li>
<li>Timestamp Validation Data;</li>
<li>AdES-T Validation Data;</li>
<li>Long Term Validation Data.</li>
</ul>
</li>
<li><strong>The Diagnostic Data</strong> – returned only if  <code>&lt;diagnosticDataToBeReturned&gt;</code> in Service Request is set to true. This is a 
  data set constructed from the information contained in the signature itself, but also from information retrieved dynamically 
  as revocation data and information extrapolated as the mathematical validity of a signature. All this information is 
  independent of the applied validation policy. Two different validation policies applied to the same diagnostic data can 
  lead to different results. For detailed example of the Diagnostic Data, see „Appendix 8 - Sample Response Data Blocks - positive 
  response“, section „The Diagnostic Data“.</li>
</ul>
<p>The Diagnostic Data block contains one additional Response element as compared to EU DSS. Every <code>&lt;Certificate…&gt;…&lt;/Certificate&gt;</code>
  container in <code>&lt;UsedCertificates&gt;…&lt;/UsedCertificates&gt;</code> contains an element <code>&lt;X509Data&gt;…&lt;/X509Data&gt;</code> for indicating the Certificate in base64 format.</p>
<p>For complete example of Service Response, see „Appendix 8 - Sample Response Data Blocks - positive response“.</p>
<h3 id="validity-of-document">Validity of Document</h3>
<p>iThe Simple Report in the Service’s Response contains information about the validity of each Signature in PDF-file (according to passing of rules in Validation Policy):</p>
<ul>
<li><strong>VALID</strong> - indicates that the signature has passed verification and it complies with the signature validation policy;</li>
<li><strong>INVALID</strong> - indicates that either the signature format is incorrect or that the digital signature value fails verification;</li>
<li><strong>INDETERMINATE</strong> - indicates that the format and digital signature verifications have not failed but there is insufficient information to determine if the electronic signature is valid.</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../deployment/" class="btn btn-neutral float-right" title="Deploying PDF Validator Web Service"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../policy/" class="btn btn-neutral" title="Validation Policy"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../policy/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../deployment/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
